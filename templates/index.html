{% extends 'base.html' %}

{% block pagetitle %}
  Home
{% endblock %}

{% block contenttitle %}
  Home
{% endblock %}

{% block content %}

  {% set rules = server.get_rules() %}
  {% if rules and len(rules) > 0%}
    <table>
      <tr>
        <th>Files</th>
        <th>Rule</th>
      </tr>
      {% for rule in rules %}
        <tr>
          <td style='text-align:right'>
            {% if rule.is_enabled() %}
              <code>{{ len(server.get_rule_files(rule)) }}</code>
            {% else %}
              Disabled
            {% endif %}
          </td>
          <td>
            <span>
              <a href='/rules/{{ rule.name }}'>
                {{ rule.name }}
              </a>
            </span>
          </td>
        </tr>
      {% endfor %}
    </table>
  {% else %}
    <p>no rules defined :(</p>
  {% endif %}

  {% set summary_vals = server.get_summary() %}
  <h2>Summary</h2>
  <ul>
    {% for summary in summary_vals %}
      <li>
        <span>{{ summary.get('name') }}:</span>
        <code>{{ summary.get('value') }}</code>
      </li>
    {% endfor %}
  </ul>

{% endblock %}
